<!DOCTYPE html>
<html lang="ja">
<head>
  <!-- CODE_HASH: c77f16b3a7052fa0fd6596c0bebda388 -->
  <!-- SOURCE_FILE: script.js -->
  <!-- START_LINE: 260 -->
  <!-- END_LINE: 271 -->
  <!-- LANGUAGE: javascript -->
  <!-- VISUALIZATION_TYPE: loop -->
  <!-- CREATED_AT: 2026-01-26T01:37:06.867Z -->
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ループ可視化 - じゃんけんシミュレーション</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      font-family: 'Consolas', 'Monaco', monospace;
      background: #1E1E1E;
      color: #CCCCCC;
      padding: 20px;
    }

    .container { max-width: 1000px; margin: 0 auto; }

    h1 { color: #4EC9B0; margin-bottom: 10px; font-size: 24px; }
    .subtitle { color: #858585; margin-bottom: 20px; font-size: 14px; }

    /* コントロール */
    .controls {
      background: #2A2D2E;
      border: 1px solid #3E3E42;
      border-radius: 8px;
      padding: 20px;
      margin-bottom: 20px;
    }
    .controls-top {
      display: flex;
      gap: 15px;
      margin-bottom: 15px;
      align-items: center;
    }
    .btn {
      padding: 8px 20px;
      border: none;
      border-radius: 6px;
      font-family: 'Consolas', monospace;
      font-size: 14px;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 8px;
      transition: all 0.2s;
    }
    .btn-play { background: #4EC9B0; color: #1E1E1E; font-weight: 600; }
    .btn-play:hover { background: #5dd9c0; }
    .btn-play.playing { background: #C586C0; }
    .btn-reset { background: #3E3E42; color: #CCCCCC; }
    .btn-reset:hover { background: #4E4E52; }

    .speed-control {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-left: auto;
    }
    .speed-label { color: #858585; font-size: 12px; }

    .progress-container { display: flex; align-items: center; gap: 15px; }
    .progress-bar {
      flex: 1;
      height: 8px;
      background: #3E3E42;
      border-radius: 4px;
      overflow: hidden;
      cursor: pointer;
    }
    .progress-fill {
      height: 100%;
      background: #4EC9B0;
      border-radius: 4px;
      transition: width 0.3s;
    }
    .progress-text { color: #4EC9B0; font-size: 14px; font-weight: 600; min-width: 130px; }

    /* 配列表示 */
    .arrays-container {
      background: #252526;
      border: 1px solid #3E3E42;
      border-radius: 8px;
      padding: 30px;
      margin-bottom: 20px;
    }
    .array-section { margin-bottom: 30px; }
    .array-section:last-child { margin-bottom: 0; }
    .array-title { color: #9CDCFE; font-size: 14px; margin-bottom: 15px; }
    .array-wrapper { position: relative; padding-bottom: 40px; }
    .array { display: flex; gap: 8px; position: relative; flex-wrap: wrap; }

    .array-item {
      width: 90px;
      height: 95px;
      border-radius: 6px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      border: 2px solid #3E3E42;
      background: #2A2D2E;
      position: relative;
      cursor: pointer;
      transition: all 0.3s;
    }
    .array-item:hover { border-color: #4EC9B0; }
    .array-item.active-y {
      background: #264F78;
      border: 3px solid #4EC9B0;
      box-shadow: 0 0 15px rgba(78, 201, 176, 0.4);
    }
    .array-item.completed {
      background: #1E4620;
      border: 2px solid #28A745;
      opacity: 0.7;
    }

    .item-index { position: absolute; top: 3px; font-size: 9px; color: #858585; }
    .item-value { font-size: 28px; font-weight: 600; color: #FFFFFF; }
    .item-label { position: absolute; bottom: 3px; font-size: 8px; font-weight: 600; color: #4EC9B0; }

    /* 現在の状態 */
    .current-state {
      background: #2A2D2E;
      border: 1px solid #3E3E42;
      border-radius: 8px;
      padding: 20px;
      margin-bottom: 20px;
    }
    .state-title { color: #9CDCFE; font-size: 14px; margin-bottom: 15px; }
    .state-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; }
    .state-item { background: #1E1E1E; border-radius: 6px; padding: 15px; }
    .state-label { color: #858585; font-size: 11px; margin-bottom: 8px; }
    .state-value { font-size: 24px; font-weight: 600; }
    .state-value.y-value { color: #4EC9B0; }

    .status-box {
      background: #1E1E1E;
      border-radius: 6px;
      padding: 15px;
      grid-column: span 3;
    }
    .status-text { font-size: 13px; color: #CCCCCC; margin-bottom: 8px; }
    .status-result { font-size: 16px; font-weight: 600; color: #CE9178; }

    .battle-display {
      display: flex;
      gap: 20px;
      align-items: center;
      justify-content: center;
      margin-top: 10px;
    }
    .hand-item {
      background: #252526;
      border: 2px solid #3E3E42;
      border-radius: 8px;
      padding: 20px;
      min-width: 120px;
      text-align: center;
    }
    .hand-label { color: #858585; font-size: 11px; margin-bottom: 10px; }
    .hand-value { font-size: 32px; margin-bottom: 5px; }
    .hand-text { color: #CCCCCC; font-size: 14px; font-weight: 600; }
    .vs-text { color: #C586C0; font-size: 20px; font-weight: 600; }

    /* コード表示 */
    .code-display {
      background: #252526;
      border: 1px solid #3E3E42;
      border-radius: 8px;
      padding: 20px;
      margin-bottom: 20px;
      font-size: 11px;
      line-height: 1.8;
    }
    .code-keyword { color: #C586C0; }
    .code-var { color: #9CDCFE; }
    .code-number { color: #B5CEA8; }
    .code-string { color: #CE9178; }
    .code-function { color: #DCDCAA; }
    .code-comment { color: #6A9955; }
  </style>
</head>
<body>
  <div class="container">
    <h1>ループ可視化 - じゃんけんシミュレーション</h1>
    <p class="subtitle">whileループで10回戦のじゃんけんをシミュレート</p>

    <!-- コントロール -->
    <div class="controls">
      <div class="controls-top">
        <button class="btn btn-play" id="playBtn">
          <span id="playIcon">▶</span>
          <span id="playText">自動再生</span>
        </button>
        <button class="btn btn-reset" id="resetBtn">⏮ 最初に戻る</button>
        <div class="speed-control">
          <span class="speed-label">速度:</span>
          <input type="range" id="speedSlider" min="500" max="3000" value="1500" step="500">
          <span class="speed-label" id="speedValue">1.5秒</span>
        </div>
      </div>
      <div class="progress-container">
        <div class="progress-bar" id="progressBar">
          <div class="progress-fill" id="progressFill"></div>
        </div>
        <div class="progress-text" id="progressText">ステップ 0/10</div>
      </div>
    </div>

    <!-- 現在の状態 -->
    <div class="current-state">
      <div class="state-title">現在の状態:</div>
      <div class="state-grid">
        <div class="state-item">
          <div class="state-label">ループ変数 (y)</div>
          <div class="state-value y-value" id="currentY">0</div>
        </div>
        <div class="state-item">
          <div class="state-label">現在の回戦</div>
          <div class="state-value" id="currentRound">-</div>
        </div>
        <div class="state-item">
          <div class="state-label">条件 (y &lt; 10)</div>
          <div class="state-value" id="conditionValue">true</div>
        </div>
        <div class="status-box">
          <div class="status-text" id="statusText">開始前</div>
          <div class="battle-display" id="battleDisplay"></div>
        </div>
      </div>
    </div>

    <!-- 配列表示 -->
    <div class="arrays-container">
      <div class="array-section">
        <div class="array-title">Aさんの手 (aHand):</div>
        <div class="array-wrapper">
          <div class="array" id="aHandDisplay"></div>
        </div>
      </div>
      <div class="array-section">
        <div class="array-title">Bさんの手 (bHand):</div>
        <div class="array-wrapper">
          <div class="array" id="bHandDisplay"></div>
        </div>
      </div>
    </div>

    <!-- コード表示 -->
    <div class="code-display">
<span class="code-keyword">while</span> (<span class="code-var">y</span> &lt; <span class="code-number">10</span>) {<br>
&nbsp;&nbsp;<span class="code-keyword">let</span> <span class="code-var">a</span> = <span class="code-var">Math</span>.<span class="code-function">floor</span>(<span class="code-var">Math</span>.<span class="code-function">random</span>() * <span class="code-number">3</span>);<br>
&nbsp;&nbsp;<span class="code-keyword">let</span> <span class="code-var">b</span> = <span class="code-var">Math</span>.<span class="code-function">floor</span>(<span class="code-var">Math</span>.<span class="code-function">random</span>() * <span class="code-number">3</span>);<br>
&nbsp;&nbsp;<span class="code-var">aHand</span>[<span class="code-var">y</span>] = <span class="code-var">hands</span>[<span class="code-var">a</span>];<br>
&nbsp;&nbsp;<span class="code-var">bHand</span>[<span class="code-var">y</span>] = <span class="code-var">hands</span>[<span class="code-var">b</span>];<br>
<br>
&nbsp;&nbsp;<span class="code-var">console</span>.<span class="code-function">log</span>(<span class="code-string">"第"</span> + (<span class="code-var">y</span> + <span class="code-number">1</span>) + <span class="code-string">"回戦"</span>);<br>
&nbsp;&nbsp;<span class="code-var">console</span>.<span class="code-function">log</span>(<span class="code-string">"Aさんの手："</span> + <span class="code-var">aHand</span>[<span class="code-var">y</span>]);<br>
&nbsp;&nbsp;<span class="code-var">console</span>.<span class="code-function">log</span>(<span class="code-string">"Bさんの手："</span> + <span class="code-var">bHand</span>[<span class="code-var">y</span>]);<br>
<br>
&nbsp;&nbsp;<span class="code-var">y</span> = <span class="code-var">y</span> + <span class="code-number">1</span>;<br>
}<br>
    </div>
  </div>

  <script>
    const hands = ['✊', '✋', '✌️'];
    const handNames = ['グー', 'パー', 'チョキ'];
    
    // シミュレーション用の手のデータ（バランスよく）
    const aHandData = ['✊', '✋', '✌️', '✊', '✋', '✌️', '✊', '✋', '✌️', '✊'];
    const bHandData = ['✋', '✊', '✋', '✌️', '✌️', '✊', '✋', '✊', '✋', '✌️'];
    
    // ステップデータ生成
    const steps = [];
    for (let y = 0; y < 10; y++) {
      steps.push({
        y: y,
        aHand: aHandData[y],
        bHand: bHandData[y],
        round: y + 1,
        condition: true
      });
    }
    steps.push({
      y: 10,
      aHand: null,
      bHand: null,
      round: null,
      condition: false
    });

    let currentStep = 0;
    let isPlaying = false;
    let playInterval = null;
    let speed = 1500;

    const playBtn = document.getElementById('playBtn');
    const resetBtn = document.getElementById('resetBtn');
    const speedSlider = document.getElementById('speedSlider');
    const speedValue = document.getElementById('speedValue');
    const progressBar = document.getElementById('progressBar');
    const progressFill = document.getElementById('progressFill');
    const progressText = document.getElementById('progressText');
    const playIcon = document.getElementById('playIcon');
    const playText = document.getElementById('playText');

    const currentY = document.getElementById('currentY');
    const currentRound = document.getElementById('currentRound');
    const conditionValue = document.getElementById('conditionValue');
    const statusText = document.getElementById('statusText');
    const battleDisplay = document.getElementById('battleDisplay');
    const aHandDisplay = document.getElementById('aHandDisplay');
    const bHandDisplay = document.getElementById('bHandDisplay');

    // 配列初期化
    function initArrays() {
      aHandDisplay.innerHTML = '';
      bHandDisplay.innerHTML = '';
      for (let i = 0; i < 10; i++) {
        const aItem = document.createElement('div');
        aItem.className = 'array-item';
        aItem.innerHTML = `
          <div class="item-index">[${i}]</div>
          <div class="item-value">-</div>
        `;
        aHandDisplay.appendChild(aItem);

        const bItem = document.createElement('div');
        bItem.className = 'array-item';
        bItem.innerHTML = `
          <div class="item-index">[${i}]</div>
          <div class="item-value">-</div>
        `;
        bHandDisplay.appendChild(bItem);
      }
    }

    // 表示更新
    function updateDisplay() {
      const step = steps[currentStep];
      
      currentY.textContent = step.y;
      currentRound.textContent = step.round !== null ? `第${step.round}回戦` : '-';
      conditionValue.textContent = step.condition ? 'true' : 'false';

      if (step.round !== null) {
        statusText.textContent = `第${step.round}回戦のじゃんけん結果:`;
        
        const aHandName = handNames[hands.indexOf(step.aHand)];
        const bHandName = handNames[hands.indexOf(step.bHand)];
        
        battleDisplay.innerHTML = `
          <div class="hand-item">
            <div class="hand-label">Aさん</div>
            <div class="hand-value">${step.aHand}</div>
            <div class="hand-text">${aHandName}</div>
          </div>
          <div class="vs-text">VS</div>
          <div class="hand-item">
            <div class="hand-label">Bさん</div>
            <div class="hand-value">${step.bHand}</div>
            <div class="hand-text">${bHandName}</div>
          </div>
        `;
      } else {
        statusText.textContent = 'ループ終了 (y = 10)';
        battleDisplay.innerHTML = '';
      }

      // 配列更新
      const aItems = aHandDisplay.querySelectorAll('.array-item');
      const bItems = bHandDisplay.querySelectorAll('.array-item');
      
      aItems.forEach((item, i) => {
        item.className = 'array-item';
        const valueEl = item.querySelector('.item-value');
        
        if (i < step.y) {
          item.classList.add('completed');
          valueEl.textContent = aHandData[i];
        } else if (i === step.y && step.round !== null) {
          item.classList.add('active-y');
          valueEl.textContent = step.aHand;
          const label = document.createElement('div');
          label.className = 'item-label';
          label.textContent = 'y';
          item.appendChild(label);
        } else {
          valueEl.textContent = '-';
        }
      });

      bItems.forEach((item, i) => {
        item.className = 'array-item';
        const valueEl = item.querySelector('.item-value');
        
        if (i < step.y) {
          item.classList.add('completed');
          valueEl.textContent = bHandData[i];
        } else if (i === step.y && step.round !== null) {
          item.classList.add('active-y');
          valueEl.textContent = step.bHand;
          const label = document.createElement('div');
          label.className = 'item-label';
          label.textContent = 'y';
          item.appendChild(label);
        } else {
          valueEl.textContent = '-';
        }
      });

      // プログレスバー
      const progress = (currentStep / steps.length) * 100;
      progressFill.style.width = progress + '%';
      progressText.textContent = `ステップ ${currentStep}/${steps.length}`;
    }

    // 自動再生
    function togglePlay() {
      if (isPlaying) {
        stopPlay();
      } else {
        startPlay();
      }
    }

    function startPlay() {
      isPlaying = true;
      playBtn.classList.add('playing');
      playIcon.textContent = '⏸';
      playText.textContent = '一時停止';
      
      playInterval = setInterval(() => {
        if (currentStep < steps.length - 1) {
          currentStep++;
          updateDisplay();
        } else {
          stopPlay();
        }
      }, speed);
    }

    function stopPlay() {
      isPlaying = false;
      playBtn.classList.remove('playing');
      playIcon.textContent = '▶';
      playText.textContent = '自動再生';
      if (playInterval) {
        clearInterval(playInterval);
        playInterval = null;
      }
    }

    function reset() {
      stopPlay();
      currentStep = 0;
      updateDisplay();
    }

    // イベントリスナー
    playBtn.addEventListener('click', togglePlay);
    resetBtn.addEventListener('click', reset);

    speedSlider.addEventListener('input', (e) => {
      speed = parseInt(e.target.value);
      speedValue.textContent = (speed / 1000).toFixed(1) + '秒';
      if (isPlaying) {
        stopPlay();
        startPlay();
      }
    });

    progressBar.addEventListener('click', (e) => {
      const rect = progressBar.getBoundingClientRect();
      const x = e.clientX - rect.left;
      const percent = x / rect.width;
      currentStep = Math.floor(percent * steps.length);
      if (currentStep >= steps.length) currentStep = steps.length - 1;
      updateDisplay();
    });

    // 初期化
    initArrays();
    updateDisplay();
  </script>
</body>
</html>