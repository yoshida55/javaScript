<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>JavaScriptå®Ÿè¡Œãƒ•ãƒ­ãƒ¼ã®ç†è§£</title>
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body { font-family: 'Segoe UI', sans-serif; background: #1a1a2e; color: #eee; padding: 20px; }
  h1 { text-align: center; margin-bottom: 20px; color: #e94560; }

  .container { display: flex; gap: 20px; max-width: 1200px; margin: 0 auto; }

  /* ã‚³ãƒ¼ãƒ‰ãƒ‘ãƒãƒ« */
  .code-panel {
    flex: 1;
    background: #16213e;
    border-radius: 12px;
    padding: 20px;
    font-family: 'Consolas', monospace;
    font-size: 13px;
    line-height: 1.8;
    overflow-y: auto;
    max-height: 80vh;
  }
  .code-line {
    padding: 2px 8px;
    border-radius: 4px;
    transition: all 0.3s;
    white-space: pre;
  }
  .code-line.active {
    background: #e94560;
    color: #fff;
    transform: scale(1.02);
    box-shadow: 0 0 15px rgba(233, 69, 96, 0.5);
  }
  .code-line.done {
    background: rgba(0, 210, 106, 0.15);
    color: #00d26a;
  }
  .code-line.registered {
    background: rgba(79, 172, 254, 0.15);
    color: #4facfe;
  }
  .code-line.skip {
    opacity: 0.3;
  }
  .line-num { color: #555; margin-right: 10px; display: inline-block; width: 24px; text-align: right; }

  /* å³ãƒ‘ãƒãƒ« */
  .right-panel { width: 380px; display: flex; flex-direction: column; gap: 15px; }

  /* ãƒ–ãƒ©ã‚¦ã‚¶ã®è¨˜æ†¶ */
  .memory-box {
    background: #16213e;
    border-radius: 12px;
    padding: 15px;
  }
  .memory-box h3 { color: #4facfe; margin-bottom: 10px; font-size: 14px; }
  .memory-item {
    padding: 8px 12px;
    margin: 5px 0;
    border-radius: 6px;
    font-size: 13px;
    transition: all 0.5s;
    opacity: 0;
    transform: translateX(20px);
  }
  .memory-item.show {
    opacity: 1;
    transform: translateX(0);
  }
  .memory-item.event { background: rgba(79, 172, 254, 0.2); border-left: 3px solid #4facfe; }
  .memory-item.dom { background: rgba(0, 210, 106, 0.2); border-left: 3px solid #00d26a; }

  /* è§£èª¬ */
  .narration-box {
    background: #16213e;
    border-radius: 12px;
    padding: 15px;
    min-height: 100px;
  }
  .narration-box h3 { color: #e94560; margin-bottom: 10px; font-size: 14px; }
  #narration {
    font-size: 14px;
    line-height: 1.8;
    color: #ccc;
  }

  /* ã‚¢ã‚³ãƒ¼ãƒ‡ã‚£ã‚ªãƒ³ãƒ‡ãƒ¢ */
  .demo-box {
    background: #16213e;
    border-radius: 12px;
    padding: 15px;
  }
  .demo-box h3 { color: #00d26a; margin-bottom: 10px; font-size: 14px; }
  .demo-accordion {
    background: #0f3460;
    border-radius: 8px;
    margin: 5px 0;
    overflow: hidden;
  }
  .demo-title {
    display: flex;
    justify-content: space-between;
    padding: 10px 15px;
    cursor: pointer;
    font-size: 13px;
    transition: background 0.3s;
  }
  .demo-title:hover { background: rgba(255,255,255,0.05); }
  .demo-title .mark { color: #e94560; font-weight: bold; }
  .demo-content {
    padding: 0 15px;
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.3s, padding 0.3s;
    font-size: 12px;
    color: #aaa;
  }
  .demo-content.open {
    max-height: 100px;
    padding: 10px 15px;
  }

  /* ãƒœã‚¿ãƒ³ */
  .controls {
    display: flex; gap: 10px; justify-content: center;
    margin: 20px 0;
  }
  .btn {
    padding: 10px 24px;
    border: none;
    border-radius: 8px;
    font-size: 14px;
    cursor: pointer;
    font-weight: bold;
    transition: all 0.3s;
  }
  .btn:hover { transform: translateY(-2px); }
  .btn-start { background: #e94560; color: #fff; }
  .btn-click { background: #4facfe; color: #fff; opacity: 0.3; pointer-events: none; }
  .btn-click.enabled { opacity: 1; pointer-events: auto; }
  .btn-reset { background: #555; color: #fff; }

  /* ãƒ•ã‚§ãƒ¼ã‚ºè¡¨ç¤º */
  .phase-indicator {
    text-align: center;
    font-size: 18px;
    font-weight: bold;
    padding: 10px;
    border-radius: 8px;
    margin-bottom: 10px;
  }
  .phase-load { background: rgba(233, 69, 96, 0.2); color: #e94560; }
  .phase-wait { background: rgba(85, 85, 85, 0.3); color: #888; }
  .phase-click { background: rgba(79, 172, 254, 0.2); color: #4facfe; }

  .legend {
    display: flex; gap: 15px; justify-content: center; margin: 10px 0; font-size: 12px;
  }
  .legend-item { display: flex; align-items: center; gap: 5px; }
  .legend-color {
    width: 14px; height: 14px; border-radius: 3px;
  }
</style>
</head>
<body>

<h1>JavaScript å®Ÿè¡Œãƒ•ãƒ­ãƒ¼ã‚’å¯è¦–åŒ–</h1>

<div class="legend">
  <div class="legend-item"><div class="legend-color" style="background:#e94560"></div> ä»Šå®Ÿè¡Œä¸­</div>
  <div class="legend-item"><div class="legend-color" style="background:rgba(0,210,106,0.3)"></div> å®Ÿè¡Œæ¸ˆã¿</div>
  <div class="legend-item"><div class="legend-color" style="background:rgba(79,172,254,0.3)"></div> ãƒ–ãƒ©ã‚¦ã‚¶ã«ç™»éŒ²æ¸ˆã¿</div>
  <div class="legend-item"><div class="legend-color" style="background:rgba(255,255,255,0.05)"></div> ã‚¹ã‚­ãƒƒãƒ—</div>
</div>

<div id="phaseIndicator" class="phase-indicator phase-wait">å¾…æ©Ÿä¸­</div>

<div class="controls">
  <button class="btn btn-start" id="btnStart" onclick="startPageLoad()">â‘  ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿é–‹å§‹</button>
  <button class="btn btn-click" id="btnClick1" onclick="simulateClick('work')">â‘¡ #work ã‚’ã‚¯ãƒªãƒƒã‚¯</button>
  <button class="btn btn-click" id="btnClick2" onclick="simulateClick('work1')">â‘¢ #work1 ã‚’ã‚¯ãƒªãƒƒã‚¯</button>
  <button class="btn btn-reset" onclick="resetAll()">ãƒªã‚»ãƒƒãƒˆ</button>
</div>

<div class="container">
  <!-- ã‚³ãƒ¼ãƒ‰ãƒ‘ãƒãƒ« -->
  <div class="code-panel" id="codePanel"></div>

  <!-- å³ãƒ‘ãƒãƒ« -->
  <div class="right-panel">
    <div class="narration-box">
      <h3>ğŸ’¬ è§£èª¬</h3>
      <div id="narration">ã€Œâ‘  ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿é–‹å§‹ã€ã‚’æŠ¼ã—ã¦ã­</div>
    </div>

    <div class="memory-box">
      <h3>ğŸ§  ãƒ–ãƒ©ã‚¦ã‚¶ã®è¨˜æ†¶ï¼ˆã‚¤ãƒ™ãƒ³ãƒˆç™»éŒ²ï¼‰</h3>
      <div id="memoryList">
        <div style="color:#555; font-size:13px;">ã¾ã ä½•ã‚‚ç™»éŒ²ã•ã‚Œã¦ã„ãªã„</div>
      </div>
    </div>

    <div class="demo-box">
      <h3>ğŸ¯ å®Ÿéš›ã®è¡¨ç¤ºï¼ˆãƒ‡ãƒ¢ï¼‰</h3>
      <div class="demo-accordion">
        <div class="demo-title" id="demoWork">
          <span>1. WEBãƒ‡ã‚£ãƒ¬ã‚¯ã‚¿ãƒ¼</span>
          <span class="mark" id="demoPlus"></span>
        </div>
        <div class="demo-content" id="demoContent">å‹Ÿé›†è·ç¨®: ãƒ†ã‚­ã‚¹ãƒˆ</div>
      </div>
      <div class="demo-accordion">
        <div class="demo-title" id="demoWork1">
          <span>2. WEBãƒ‡ã‚¶ã‚¤ãƒŠãƒ¼</span>
          <span class="mark" id="demoPlus1"></span>
        </div>
        <div class="demo-content" id="demoContent1">å‹Ÿé›†è·ç¨®: ãƒ†ã‚­ã‚¹ãƒˆ</div>
      </div>
    </div>
  </div>
</div>

<script>
// ã‚³ãƒ¼ãƒ‰ã®å®šç¾©
const codeLines = [
  { text: '$(function () {', type: 'structure', id: 'domready-start' },
  { text: '  $(".plus").text("ï¼‹");', type: 'init', id: 'init-plus' },
  { text: '  $(".plus1").text("ï¼‹");', type: 'init', id: 'init-plus1' },
  { text: '  $(".plus2").text("ï¼‹");', type: 'init', id: 'init-plus2' },
  { text: '', type: 'blank' },
  { text: '  $("#work").click(function () {', type: 'register', id: 'reg-work' },
  { text: '    var content = $(".accordion-content");', type: 'click-work', id: 'cw-1' },
  { text: '    var plusObj = $(".plus");', type: 'click-work', id: 'cw-2' },
  { text: '    content.slideToggle();', type: 'click-work', id: 'cw-3' },
  { text: '    if (plusObj.text() === "ï¼‹") {', type: 'click-work', id: 'cw-4' },
  { text: '      plusObj.text("ãƒ¼");', type: 'click-work', id: 'cw-5' },
  { text: '    } else {', type: 'click-work', id: 'cw-6' },
  { text: '      plusObj.text("ï¼‹");', type: 'click-work', id: 'cw-7' },
  { text: '    }', type: 'click-work', id: 'cw-8' },
  { text: '  });', type: 'structure' },
  { text: '', type: 'blank' },
  { text: '  $("#work1").click(function () {', type: 'register', id: 'reg-work1' },
  { text: '    var content1 = $(".accordion-content1");', type: 'click-work1', id: 'cw1-1' },
  { text: '    var plusObj1 = $(".plus1");', type: 'click-work1', id: 'cw1-2' },
  { text: '    content1.slideToggle();', type: 'click-work1', id: 'cw1-3' },
  { text: '    if (plusObj1.text() === "ï¼‹") {', type: 'click-work1', id: 'cw1-4' },
  { text: '      plusObj1.text("ãƒ¼");', type: 'click-work1', id: 'cw1-5' },
  { text: '    } else {', type: 'click-work1', id: 'cw1-6' },
  { text: '      plusObj1.text("ï¼‹");', type: 'click-work1', id: 'cw1-7' },
  { text: '    }', type: 'click-work1', id: 'cw1-8' },
  { text: '  });', type: 'structure' },
  { text: '', type: 'blank' },
  { text: '});', type: 'structure', id: 'domready-end' },
];

// ã‚³ãƒ¼ãƒ‰ã‚’HTMLã«æç”»
const codePanel = document.getElementById('codePanel');
codeLines.forEach((line, i) => {
  const div = document.createElement('div');
  div.className = 'code-line';
  div.id = 'line-' + i;
  div.innerHTML = `<span class="line-num">${i + 1}</span>${escapeHtml(line.text)}`;
  codePanel.appendChild(div);
});

function escapeHtml(str) {
  return str.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;');
}

// çŠ¶æ…‹ç®¡ç†
let plusState = '';
let plus1State = '';
let isRegistered = { work: false, work1: false };
let isRunning = false;

// ãƒŠãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³æ›´æ–°
function setNarration(html) {
  document.getElementById('narration').innerHTML = html;
}

// ãƒ•ã‚§ãƒ¼ã‚ºæ›´æ–°
function setPhase(type, text) {
  const el = document.getElementById('phaseIndicator');
  el.className = 'phase-indicator phase-' + type;
  el.textContent = text;
}

// è¡Œã‚’ãƒã‚¤ãƒ©ã‚¤ãƒˆ
function highlightLine(index, className) {
  document.getElementById('line-' + index).className = 'code-line ' + className;
}
function clearAllLines() {
  for (let i = 0; i < codeLines.length; i++) {
    document.getElementById('line-' + i).className = 'code-line';
  }
}

// ãƒ¡ãƒ¢ãƒªè¡¨ç¤º
function addMemory(id, text, type) {
  const list = document.getElementById('memoryList');
  if (list.querySelector('[data-id="placeholder"]') || list.children[0]?.dataset?.id === undefined) {
    list.innerHTML = '';
  }
  const div = document.createElement('div');
  div.className = 'memory-item ' + type;
  div.dataset.id = id;
  div.textContent = text;
  list.appendChild(div);
  setTimeout(() => div.classList.add('show'), 50);
}

// sleep
function sleep(ms) { return new Promise(r => setTimeout(r, ms)); }

// ===== ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ =====
async function startPageLoad() {
  if (isRunning) return;
  isRunning = true;
  document.getElementById('btnStart').style.opacity = '0.3';
  document.getElementById('btnStart').style.pointerEvents = 'none';

  setPhase('load', 'ğŸ“„ ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿ä¸­...');

  // Step 1: $(function(){}) ã«å…¥ã‚‹
  highlightLine(0, 'active');
  setNarration('ğŸ”µ <b>$(function(){})</b> ã«å…¥ã£ãŸï¼<br>â†’ HTMLã®èª­ã¿è¾¼ã¿ãŒå®Œäº†ã—ãŸã®ã§ã€ä¸­ã®å‡¦ç†ã‚’<b>ä¸Šã‹ã‚‰é †ã«</b>å®Ÿè¡Œã—ã¦ã„ã');
  await sleep(2000);
  highlightLine(0, 'done');

  // Step 2: .plus ã« ï¼‹
  highlightLine(1, 'active');
  setNarration('âœ… <b>$(".plus").text("ï¼‹")</b><br>â†’ .plusè¦ç´ ã«ã€Œï¼‹ã€ã‚’ã‚»ãƒƒãƒˆï¼<br><b>ã“ã®è¡Œã¯ä»Š1å›ã ã‘å®Ÿè¡Œã•ã‚Œã‚‹</b>');
  document.getElementById('demoPlus').textContent = 'ï¼‹';
  plusState = 'ï¼‹';
  addMemory('dom-plus', '.plus â†’ "ï¼‹" ã‚’ã‚»ãƒƒãƒˆ', 'dom');
  await sleep(2000);
  highlightLine(1, 'done');

  // Step 3: .plus1 ã« ï¼‹
  highlightLine(2, 'active');
  setNarration('âœ… <b>$(".plus1").text("ï¼‹")</b><br>â†’ .plus1è¦ç´ ã«ã‚‚ã€Œï¼‹ã€ã‚’ã‚»ãƒƒãƒˆï¼');
  document.getElementById('demoPlus1').textContent = 'ï¼‹';
  plus1State = 'ï¼‹';
  addMemory('dom-plus1', '.plus1 â†’ "ï¼‹" ã‚’ã‚»ãƒƒãƒˆ', 'dom');
  await sleep(1500);
  highlightLine(2, 'done');

  // Step 4: .plus2 ã« ï¼‹
  highlightLine(3, 'active');
  setNarration('âœ… <b>$(".plus2").text("ï¼‹")</b><br>â†’ .plus2ã«ã‚‚ã€Œï¼‹ã€ã‚’ã‚»ãƒƒãƒˆï¼');
  await sleep(1500);
  highlightLine(3, 'done');

  // Step 5: clickç™»éŒ²ï¼ˆ#workï¼‰
  highlightLine(5, 'active');
  setNarration('ğŸ”µ <b>$("#work").click(function(){...})</b><br>â†’ âš ï¸ <b>ä¸­èº«ã¯å®Ÿè¡Œã—ãªã„ï¼</b><br>â†’ ã€Œ#workãŒã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸã‚‰ã“ã®é–¢æ•°ã‚’å®Ÿè¡Œã—ã¦ã­ã€ã¨<br>ã€€ <b>ãƒ–ãƒ©ã‚¦ã‚¶ã«ç™»éŒ²ï¼ˆäºˆç´„ï¼‰ã™ã‚‹ã ã‘</b>');
  await sleep(3000);
  // ä¸­ã®è¡Œã‚’ã‚¹ã‚­ãƒƒãƒ—è¡¨ç¤º
  for (let i = 6; i <= 14; i++) {
    highlightLine(i, 'skip');
  }
  highlightLine(5, 'registered');
  isRegistered.work = true;
  addMemory('ev-work', 'ğŸ¯ #work ã‚¯ãƒªãƒƒã‚¯ â†’ function() å®Ÿè¡Œ', 'event');
  setNarration('ğŸ“‹ ãƒ–ãƒ©ã‚¦ã‚¶ãŒè¦šãˆãŸï¼<br>ã€Œ<b>#workãŒã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸã‚‰ã€6ã€œ14è¡Œç›®ã‚’å®Ÿè¡Œã™ã‚‹</b>ã€<br><br>âš ï¸ 6ã€œ14è¡Œç›®ã¯ä»Šã¯ã‚¹ã‚­ãƒƒãƒ—ï¼');
  await sleep(3000);

  // Step 6: clickç™»éŒ²ï¼ˆ#work1ï¼‰
  highlightLine(16, 'active');
  setNarration('ğŸ”µ <b>$("#work1").click(function(){...})</b><br>â†’ ã“ã£ã¡ã‚‚<b>ç™»éŒ²ã™ã‚‹ã ã‘</b>ã€‚ä¸­èº«ã¯å®Ÿè¡Œã—ãªã„');
  await sleep(2500);
  for (let i = 17; i <= 25; i++) {
    highlightLine(i, 'skip');
  }
  highlightLine(16, 'registered');
  isRegistered.work1 = true;
  addMemory('ev-work1', 'ğŸ¯ #work1 ã‚¯ãƒªãƒƒã‚¯ â†’ function() å®Ÿè¡Œ', 'event');
  await sleep(1500);

  // Step 7: é–‰ã˜æ‹¬å¼§
  highlightLine(27, 'active');
  setNarration('âœ… <b>$(function(){}) çµ‚äº†ï¼</b><br><br>ã‚„ã£ãŸã“ã¨ï¼š<br>â‘  ï¼‹ã‚’è¡¨ç¤ºï¼ˆåˆæœŸåŒ–ï¼‰<br>â‘¡ ã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆã‚’ç™»éŒ²<br><br>ğŸ”´ <b>ã“ã“ã§JSã®å®Ÿè¡Œã¯å®Œå…¨ã«çµ‚äº†</b><br>â†’ ã‚‚ã†ä¸Šã‹ã‚‰ã‚„ã‚Šç›´ã™ã“ã¨ã¯ãªã„ï¼');
  await sleep(3000);
  highlightLine(27, 'done');

  // å¾…æ©ŸçŠ¶æ…‹
  setPhase('wait', 'â¸ å¾…æ©Ÿä¸­... ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã‚¯ãƒªãƒƒã‚¯ã‚’å¾…ã£ã¦ã„ã‚‹');
  setNarration('JSã®å®Ÿè¡Œã¯çµ‚ã‚ã£ãŸã€‚<br><br>ãƒ–ãƒ©ã‚¦ã‚¶ã¯<b>ã‚¤ãƒ™ãƒ³ãƒˆç™»éŒ²ã ã‘è¦šãˆã¦</b>å¾…æ©Ÿä¸­ã€‚<br><br>ğŸ‘† <b>â‘¡ã‹â‘¢ã®ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦ã¿ã‚ˆã†ï¼</b>');

  document.getElementById('btnClick1').classList.add('enabled');
  document.getElementById('btnClick2').classList.add('enabled');
  isRunning = false;
}

// ===== ã‚¯ãƒªãƒƒã‚¯æ™‚ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ =====
async function simulateClick(target) {
  if (isRunning) return;
  isRunning = true;

  // å…¨è¡Œãƒªã‚»ãƒƒãƒˆï¼ˆç™»éŒ²æ¸ˆã¿ã¯ç¶­æŒï¼‰
  for (let i = 0; i < codeLines.length; i++) {
    const line = codeLines[i];
    const el = document.getElementById('line-' + i);
    if (line.type === 'register') {
      el.className = 'code-line registered';
    } else if (line.type === 'init' || i === 0 || i === 27) {
      el.className = 'code-line done';
    } else if (line.type.startsWith('click-')) {
      el.className = 'code-line skip';
    } else {
      el.className = 'code-line';
    }
  }

  if (target === 'work') {
    setPhase('click', 'ğŸ–± #work ãŒã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸï¼');
    setNarration('ğŸ–± <b>#workãŒã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸï¼</b><br><br>ãƒ–ãƒ©ã‚¦ã‚¶ã€Œã‚ã€#workã®ç™»éŒ²ã‚ã£ãŸãª...ã€<br>â†’ <b>ç™»éŒ²ã•ã‚ŒãŸé–¢æ•°ã ã‘</b>å®Ÿè¡Œé–‹å§‹ï¼<br><br>âš ï¸ 1è¡Œç›®ã‹ã‚‰ã‚„ã‚Šç›´ã—ã§ã¯ãªã„ï¼');
    await sleep(2500);

    // ç™»éŒ²è¡Œã‚’ãƒã‚¤ãƒ©ã‚¤ãƒˆ
    highlightLine(5, 'active');
    setNarration('â†’ ãƒ–ãƒ©ã‚¦ã‚¶ãŒ<b>5è¡Œç›®ã§ç™»éŒ²ã—ãŸé–¢æ•°</b>ã‚’å‘¼ã³å‡ºã™<br>â†’ <b>6è¡Œç›®ã‹ã‚‰å®Ÿè¡Œé–‹å§‹</b>');
    await sleep(2000);

    // ä¸­èº«ã‚’é †ç•ªã«å®Ÿè¡Œ
    const clickLines = [6, 7, 8, 9];
    const messages = [
      'å¤‰æ•°contentã«ã‚¢ã‚³ãƒ¼ãƒ‡ã‚£ã‚ªãƒ³ã®è¦ç´ ã‚’å–å¾—',
      'å¤‰æ•°plusObjã«.plusè¦ç´ ã‚’å–å¾—',
      '<b>slideToggle()</b> â†’ ã‚¢ã‚³ãƒ¼ãƒ‡ã‚£ã‚ªãƒ³ã‚’é–‹é–‰ï¼',
      '<b>plusObj.text() === "ï¼‹" ?</b><br>â†’ ä»Šã®å€¤ã¯ã€Œ' + plusState + 'ã€'
    ];

    for (let j = 0; j < clickLines.length; j++) {
      highlightLine(clickLines[j], 'active');
      setNarration(messages[j]);
      if (clickLines[j] === 8) {
        document.getElementById('demoContent').classList.toggle('open');
      }
      await sleep(1800);
      highlightLine(clickLines[j], 'done');
    }

    // ifåˆ†å²
    if (plusState === 'ï¼‹') {
      highlightLine(10, 'active');
      setNarration('âœ… ã€Œï¼‹ã€ã ã£ãŸã®ã§ â†’ <b>ã€Œãƒ¼ã€ã«å¤‰æ›´ï¼</b>');
      document.getElementById('demoPlus').textContent = 'ãƒ¼';
      plusState = 'ãƒ¼';
      await sleep(2000);
      highlightLine(10, 'done');
      highlightLine(11, 'skip');
      highlightLine(12, 'skip');
    } else {
      highlightLine(11, 'skip');
      highlightLine(12, 'active');
      setNarration('âœ… ã€Œãƒ¼ã€ã ã£ãŸã®ã§ â†’ <b>ã€Œï¼‹ã€ã«æˆ»ã™ï¼</b>');
      document.getElementById('demoPlus').textContent = 'ï¼‹';
      plusState = 'ï¼‹';
      await sleep(2000);
      highlightLine(12, 'done');
    }

    highlightLine(13, 'done');
    await sleep(500);

    setNarration('âœ… <b>ã‚¯ãƒªãƒƒã‚¯å‡¦ç†å®Œäº†ï¼</b><br><br>å®Ÿè¡Œã•ã‚ŒãŸã®ã¯<b>6ã€œ14è¡Œç›®ã ã‘</b>ã€‚<br>1è¡Œç›®ã®åˆæœŸåŒ–ã¯é€šã£ã¦ãªã„ï¼<br><br>ğŸ‘† ã‚‚ã†ä¸€åº¦æŠ¼ã™ã¨ï¼‹/ãƒ¼ãŒåˆ‡ã‚Šæ›¿ã‚ã‚‹ã‚ˆ');

  } else if (target === 'work1') {
    setPhase('click', 'ğŸ–± #work1 ãŒã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸï¼');
    setNarration('ğŸ–± <b>#work1ãŒã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸï¼</b><br><br>ãƒ–ãƒ©ã‚¦ã‚¶ã€Œ#work1ã®ç™»éŒ²ã‚ã£ãŸãª...ã€<br>â†’ <b>16è¡Œç›®ã§ç™»éŒ²ã—ãŸé–¢æ•°</b>ã‚’å®Ÿè¡Œï¼');
    await sleep(2500);

    highlightLine(16, 'active');
    await sleep(1500);

    const clickLines = [17, 18, 19, 20];
    const messages = [
      'å¤‰æ•°content1ã«ã‚¢ã‚³ãƒ¼ãƒ‡ã‚£ã‚ªãƒ³è¦ç´ ã‚’å–å¾—',
      'å¤‰æ•°plusObj1ã«.plus1è¦ç´ ã‚’å–å¾—',
      '<b>slideToggle()</b> â†’ ã‚¢ã‚³ãƒ¼ãƒ‡ã‚£ã‚ªãƒ³ã‚’é–‹é–‰ï¼',
      '<b>plusObj1.text() === "ï¼‹" ?</b><br>â†’ ä»Šã®å€¤ã¯ã€Œ' + plus1State + 'ã€'
    ];

    for (let j = 0; j < clickLines.length; j++) {
      highlightLine(clickLines[j], 'active');
      setNarration(messages[j]);
      if (clickLines[j] === 19) {
        document.getElementById('demoContent1').classList.toggle('open');
      }
      await sleep(1800);
      highlightLine(clickLines[j], 'done');
    }

    if (plus1State === 'ï¼‹') {
      highlightLine(21, 'active');
      setNarration('âœ… ã€Œï¼‹ã€ã ã£ãŸã®ã§ â†’ <b>ã€Œãƒ¼ã€ã«å¤‰æ›´ï¼</b>');
      document.getElementById('demoPlus1').textContent = 'ãƒ¼';
      plus1State = 'ãƒ¼';
      await sleep(2000);
      highlightLine(21, 'done');
    } else {
      highlightLine(23, 'active');
      setNarration('âœ… ã€Œãƒ¼ã€ã ã£ãŸã®ã§ â†’ <b>ã€Œï¼‹ã€ã«æˆ»ã™ï¼</b>');
      document.getElementById('demoPlus1').textContent = 'ï¼‹';
      plus1State = 'ï¼‹';
      await sleep(2000);
      highlightLine(23, 'done');
    }

    setNarration('âœ… <b>ã‚¯ãƒªãƒƒã‚¯å‡¦ç†å®Œäº†ï¼</b><br><br>å®Ÿè¡Œã•ã‚ŒãŸã®ã¯<b>17ã€œ25è¡Œç›®ã ã‘</b>ã€‚<br>ä»–ã®è¡Œã¯ä¸€åˆ‡é€šã£ã¦ãªã„ï¼');
  }

  setPhase('wait', 'â¸ å¾…æ©Ÿä¸­... æ¬¡ã®ã‚¯ãƒªãƒƒã‚¯ã‚’å¾…ã£ã¦ã„ã‚‹');
  isRunning = false;
}

// ãƒªã‚»ãƒƒãƒˆ
function resetAll() {
  clearAllLines();
  document.getElementById('memoryList').innerHTML = '<div style="color:#555; font-size:13px;">ã¾ã ä½•ã‚‚ç™»éŒ²ã•ã‚Œã¦ã„ãªã„</div>';
  document.getElementById('narration').innerHTML = 'ã€Œâ‘  ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿é–‹å§‹ã€ã‚’æŠ¼ã—ã¦ã­';
  document.getElementById('demoPlus').textContent = '';
  document.getElementById('demoPlus1').textContent = '';
  document.getElementById('demoContent').classList.remove('open');
  document.getElementById('demoContent1').classList.remove('open');
  document.getElementById('btnStart').style.opacity = '1';
  document.getElementById('btnStart').style.pointerEvents = 'auto';
  document.getElementById('btnClick1').classList.remove('enabled');
  document.getElementById('btnClick2').classList.remove('enabled');
  setPhase('wait', 'å¾…æ©Ÿä¸­');
  plusState = '';
  plus1State = '';
  isRegistered = { work: false, work1: false };
  isRunning = false;
}
</script>
</body>
</html>
